function getRandomInt(n,t){return Math.floor(Math.random()*(t-n+1))+n}var species=[{name:"Jiřička Hrůzostrašná",subSets:[["sounds/001/108_ci_109_2013/108_ci_109_2013_10.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_11.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_12.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_14.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_15.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_16.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_20.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_22.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_25.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_27.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_31.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_33.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_38.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_40.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_42.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_44.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_47.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_49.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_51.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_52.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_53.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_54.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_58.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_6.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_64.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_66.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_68.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_69.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_70.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_72.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_73.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_74.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_8.wav","sounds/001/108_ci_109_2013/108_ci_109_2013_9.wav"],["sounds/001/108-109b_2014/108-109b_2014_10.wav","sounds/001/108-109b_2014/108-109b_2014_11.wav","sounds/001/108-109b_2014/108-109b_2014_12.wav","sounds/001/108-109b_2014/108-109b_2014_13.wav","sounds/001/108-109b_2014/108-109b_2014_14.wav","sounds/001/108-109b_2014/108-109b_2014_15.wav","sounds/001/108-109b_2014/108-109b_2014_16.wav","sounds/001/108-109b_2014/108-109b_2014_17.wav","sounds/001/108-109b_2014/108-109b_2014_18.wav","sounds/001/108-109b_2014/108-109b_2014_19.wav","sounds/001/108-109b_2014/108-109b_2014_2.wav","sounds/001/108-109b_2014/108-109b_2014_20.wav","sounds/001/108-109b_2014/108-109b_2014_21.wav","sounds/001/108-109b_2014/108-109b_2014_3.wav","sounds/001/108-109b_2014/108-109b_2014_4.wav","sounds/001/108-109b_2014/108-109b_2014_5.wav","sounds/001/108-109b_2014/108-109b_2014_6.wav","sounds/001/108-109b_2014/108-109b_2014_7.wav","sounds/001/108-109b_2014/108-109b_2014_8.wav","sounds/001/108-109b_2014/108-109b_2014_9.wav",]]},{name:"Satan Klausův",subSets:[["sounds/002/193_2013/193_2013_10.wav","sounds/002/193_2013/193_2013_11.wav","sounds/002/193_2013/193_2013_12.wav","sounds/002/193_2013/193_2013_13.wav","sounds/002/193_2013/193_2013_14.wav","sounds/002/193_2013/193_2013_15.wav","sounds/002/193_2013/193_2013_16.wav","sounds/002/193_2013/193_2013_17.wav","sounds/002/193_2013/193_2013_18.wav","sounds/002/193_2013/193_2013_19.wav","sounds/002/193_2013/193_2013_2.wav","sounds/002/193_2013/193_2013_20.wav","sounds/002/193_2013/193_2013_21.wav","sounds/002/193_2013/193_2013_22.wav","sounds/002/193_2013/193_2013_23.wav","sounds/002/193_2013/193_2013_24.wav","sounds/002/193_2013/193_2013_25.wav","sounds/002/193_2013/193_2013_3.wav","sounds/002/193_2013/193_2013_5.wav","sounds/002/193_2013/193_2013_6.wav","sounds/002/193_2013/193_2013_7.wav","sounds/002/193_2013/193_2013_8.wav","sounds/002/193_2013/193_2013_9.wav",],["sounds/002/193b_2014/193b_2014_1.wav","sounds/002/193b_2014/193b_2014_10.wav","sounds/002/193b_2014/193b_2014_11.wav","sounds/002/193b_2014/193b_2014_12.wav","sounds/002/193b_2014/193b_2014_13.wav","sounds/002/193b_2014/193b_2014_14.wav","sounds/002/193b_2014/193b_2014_15.wav","sounds/002/193b_2014/193b_2014_16.wav","sounds/002/193b_2014/193b_2014_17.wav","sounds/002/193b_2014/193b_2014_18.wav","sounds/002/193b_2014/193b_2014_19.wav","sounds/002/193b_2014/193b_2014_2.wav","sounds/002/193b_2014/193b_2014_20.wav","sounds/002/193b_2014/193b_2014_21.wav","sounds/002/193b_2014/193b_2014_22.wav","sounds/002/193b_2014/193b_2014_23.wav","sounds/002/193b_2014/193b_2014_24.wav","sounds/002/193b_2014/193b_2014_25.wav","sounds/002/193b_2014/193b_2014_26.wav","sounds/002/193b_2014/193b_2014_27.wav","sounds/002/193b_2014/193b_2014_3.wav","sounds/002/193b_2014/193b_2014_4.wav","sounds/002/193b_2014/193b_2014_5.wav","sounds/002/193b_2014/193b_2014_6.wav","sounds/002/193b_2014/193b_2014_7.wav","sounds/002/193b_2014/193b_2014_8.wav","sounds/002/193b_2014/193b_2014_9.wav",]]},{name:"Krůta Ukrutná",subSets:[["sounds/003/229_spont_2013/229_spont_2013_10.wav","sounds/003/229_spont_2013/229_spont_2013_11.wav","sounds/003/229_spont_2013/229_spont_2013_12.wav","sounds/003/229_spont_2013/229_spont_2013_13.wav","sounds/003/229_spont_2013/229_spont_2013_14.wav","sounds/003/229_spont_2013/229_spont_2013_15.wav","sounds/003/229_spont_2013/229_spont_2013_16.wav","sounds/003/229_spont_2013/229_spont_2013_17.wav","sounds/003/229_spont_2013/229_spont_2013_18.wav","sounds/003/229_spont_2013/229_spont_2013_19.wav","sounds/003/229_spont_2013/229_spont_2013_2.wav","sounds/003/229_spont_2013/229_spont_2013_3.wav","sounds/003/229_spont_2013/229_spont_2013_4.wav","sounds/003/229_spont_2013/229_spont_2013_5.wav","sounds/003/229_spont_2013/229_spont_2013_6.wav","sounds/003/229_spont_2013/229_spont_2013_7.wav","sounds/003/229_spont_2013/229_spont_2013_8.wav","sounds/003/229_spont_2013/229_spont_2013_9.wav"],["sounds/003/229b_2014/229b_2014_10.wav","sounds/003/229b_2014/229b_2014_11.wav","sounds/003/229b_2014/229b_2014_12.wav","sounds/003/229b_2014/229b_2014_13.wav","sounds/003/229b_2014/229b_2014_14.wav","sounds/003/229b_2014/229b_2014_15.wav","sounds/003/229b_2014/229b_2014_16.wav","sounds/003/229b_2014/229b_2014_17.wav","sounds/003/229b_2014/229b_2014_18.wav","sounds/003/229b_2014/229b_2014_19.wav","sounds/003/229b_2014/229b_2014_2.wav","sounds/003/229b_2014/229b_2014_20.wav","sounds/003/229b_2014/229b_2014_21.wav","sounds/003/229b_2014/229b_2014_22.wav","sounds/003/229b_2014/229b_2014_23.wav","sounds/003/229b_2014/229b_2014_24.wav","sounds/003/229b_2014/229b_2014_25.wav","sounds/003/229b_2014/229b_2014_3.wav","sounds/003/229b_2014/229b_2014_4.wav","sounds/003/229b_2014/229b_2014_5.wav","sounds/003/229b_2014/229b_2014_6.wav","sounds/003/229b_2014/229b_2014_7.wav","sounds/003/229b_2014/229b_2014_8.wav","sounds/003/229b_2014/229b_2014_9.wav",]]},{name:"Pěnkava Umrlá",subSets:[["sounds/004/7_2013/7_2013_1.wav","sounds/004/7_2013/7_2013_12.wav","sounds/004/7_2013/7_2013_13.wav","sounds/004/7_2013/7_2013_14.wav","sounds/004/7_2013/7_2013_15.wav","sounds/004/7_2013/7_2013_16.wav","sounds/004/7_2013/7_2013_17.wav","sounds/004/7_2013/7_2013_2.wav","sounds/004/7_2013/7_2013_4.wav","sounds/004/7_2013/7_2013_8.wav",],["sounds/004/7_2014/7_2014_10.wav","sounds/004/7_2014/7_2014_11.wav","sounds/004/7_2014/7_2014_12.wav","sounds/004/7_2014/7_2014_13.wav","sounds/004/7_2014/7_2014_14.wav","sounds/004/7_2014/7_2014_15.wav","sounds/004/7_2014/7_2014_16.wav","sounds/004/7_2014/7_2014_17.wav","sounds/004/7_2014/7_2014_2.wav","sounds/004/7_2014/7_2014_3.wav","sounds/004/7_2014/7_2014_4.wav","sounds/004/7_2014/7_2014_5.wav","sounds/004/7_2014/7_2014_6.wav","sounds/004/7_2014/7_2014_7.wav","sounds/004/7_2014/7_2014_8.wav","sounds/004/7_2014/7_2014_9.wav"]]},{name:"Ostuda Obecná",subSets:[["sounds/005/94_2013/94_2013_10.wav","sounds/005/94_2013/94_2013_2.wav","sounds/005/94_2013/94_2013_3.wav","sounds/005/94_2013/94_2013_4.wav","sounds/005/94_2013/94_2013_5.wav",],["sounds/005/94_2014/94_2014_10.wav","sounds/005/94_2014/94_2014_11.wav","sounds/005/94_2014/94_2014_12.wav","sounds/005/94_2014/94_2014_13.wav","sounds/005/94_2014/94_2014_14.wav","sounds/005/94_2014/94_2014_15.wav","sounds/005/94_2014/94_2014_16.wav","sounds/005/94_2014/94_2014_17.wav","sounds/005/94_2014/94_2014_2.wav","sounds/005/94_2014/94_2014_3.wav","sounds/005/94_2014/94_2014_4.wav","sounds/005/94_2014/94_2014_5.wav","sounds/005/94_2014/94_2014_6.wav","sounds/005/94_2014/94_2014_7.wav","sounds/005/94_2014/94_2014_8.wav","sounds/005/94_2014/94_2014_9.wav"]]}];(function(){function e(n,t){var i=new Date,r,u;r=l!=null?i-l:null;u=JSON.stringify({label:n,card:t,time:i,millisecondsSinceLastEvent:r,gameId:y});l=i;$.ajax({url:"/api/events/",type:"post",data:u,dataType:"json",accept:"application/json",contentType:"application/json",success:function(n){y=n},error:function(n){alert(n)}})}var c=!1,u=10,v=species.length,t=null,h=0,l=null,y=null,w=!1,i,r,o,a,s,p,n,f;for(u>v*2&&alert("More cards than sets."),i=[],r=[],n=0;n<v;n++)r.push({index:n,weight:getRandomInt(0,1e3),species:species[n]});for(r.sort(function(n,t){return n.weight-t.weight}),speciesIndex=0,n=0;n<u;n+=2,speciesIndex++){for(o=[],a=r[speciesIndex].species.subSets,s=0;s<a.length;s++)p=getRandomInt(0,a[s].length-1),o.push({weight:getRandomInt(0,1e3),url:r[speciesIndex].species.subSets[s][p]});o.sort(function(n,t){return n.weight-t.weight});i.push({setIndex:r[speciesIndex].index,weight:getRandomInt(0,1e3),url:o[0].url,name:r[speciesIndex].species.name});i.push({setIndex:r[speciesIndex].index,weight:getRandomInt(0,1e3),url:o[1].url,name:r[speciesIndex].species.name})}for(i.sort(function(n,t){return n.weight-t.weight}),e("started",null),n=0;n<u;n++){i[n].cardId="#card"+n;f=i[n];$(f.cardId).addClass("cardCovered");$(f.cardId).empty();console.log(f);$(document).on("click",f.cardId,f,function(n){var o;if(!c){c=!0;var f=n.data.cardId,s=n.data.url,r=n.data;$(f).addClass("cardPlaying");$(f).removeClass("cardCovered");$(f).addClass("cardUncovered");o=new Audio(s);o.onended=function(){if($(r.cardId).removeClass("cardPlaying"),c=!1,console.log("Sound finished for card: "),console.log(r),console.log("First selected card: "+t),console.log(t),h<u)if(t!=null&&t.cardId!=r.cardId){if(t.setIndex!=r.setIndex)$(r.cardId).removeClass("cardUncovered"),$(r.cardId).addClass("cardCovered"),$(t.cardId).removeClass("cardUncovered"),$(t.cardId).addClass("cardCovered"),e("mismatch",r.url);else{if(h+=2,console.log(h+", "+u),h>=u){for(var n=0;n<u;n++)console.log(i[n]),$(i[n].cardId).text(i[n].name);w=!0}e("match",r.url)}t=null}else e("first",r.url),t=r;else e("after the win",r.url)};o.play();console.log("Card selected: ");console.log(r)}})}})();